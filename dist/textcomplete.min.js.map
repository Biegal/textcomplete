{"version":3,"sources":["webpack:///textcomplete.min.js","webpack:///webpack/bootstrap e9fe0aaf59e71a1e53a3","webpack:///./src/search_result.js","webpack:///./src/strategy.js","webpack:///./~/eventemitter3/index.js","webpack:///./src/utils.js","webpack:///./src/dropdown.js","webpack:///./src/editor.js","webpack:///./src/textarea.js","webpack:///./src/textcomplete.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/completer.js","webpack:///./src/dropdown_item.js","webpack:///./src/main.js","webpack:///./src/query.js","webpack:///./~/textarea-caret/index.js","webpack:///./~/undate/lib/update.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_strategy","SearchResult","obj","data","term","strategy","this","beforeCursor","afterCursor","replacement","replace","Array","isArray","match","matchText","_","p1","parseInt","slice","index","join","template","default","DEFAULT_TEMPLATE","_query","_query2","Strategy","cache","text","context","callback","searchWithCache","search","_this","results","Events","EE","fn","once","EventEmitter","_events","_eventsCount","has","prefix","create","__proto__","eventNames","events","names","push","getOwnPropertySymbols","concat","listeners","event","exists","evt","available","ee","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","undefined","apply","j","on","listener","removeAllListeners","off","addListener","setMaxListeners","prefixed","calculateElementOffset","el","rect","getBoundingClientRect","_el$ownerDocument","ownerDocument","defaultView","documentElement","offset","top","pageYOffset","left","pageXOffset","clientTop","clientLeft","isDigit","charCode","CHAR_CODE_ZERO","CHAR_CODE_NINE","getLineHeightPx","node","computedStyle","window","getComputedStyle","lineHeight","charCodeAt","parseFloat","fontSize","body","document","tempNode","createElement","nodeName","innerHTML","style","fontFamily","appendChild","height","offsetHeight","removeChild","createCustomEvent","CustomEvent","type","options","cancelable","detail","createEvent","initCustomEvent","_interopRequireDefault","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","constructor","setPrototypeOf","_eventemitter","_eventemitter2","_dropdown_item","_dropdown_item2","_search_result","_utils","DEFAULT_CLASS_NAME","Dropdown","_EventEmitter","getPrototypeOf","shown","items","footer","header","maxCount","className","rotate","placement","keys","forEach","display","position","zIndex","parentNode","clear","_el","searchResults","cursorOffset","renderEvent","defaultPrevented","rawResults","map","searchResult","dropdownItems","setStrategyId","renderEdge","append","setOffset","show","hide","dropdownItem","selectEvent","deactivate","e","moveActiveItem","find","item","active","_this2","fragment","createDocumentFragment","appended","right","element","forceTop","isPlacementAuto","dropdownHeight","clientHeight","isPlacementTop","bottom","showEvent","hideEvent","destroy","activeItem","getActiveItem","nextActiveItem","activate","preventDefault","strategyId","id","setAttribute","removeAttribute","source","content","li","classList","add","Editor","Error","code","moveEvent","enterEvent","changeEvent","getBeforeCursor","escEvent","keyCode","ctrlKey","_get","receiver","Function","desc","getOwnPropertyDescriptor","parent","_update","_update2","_editor","_editor2","getCaretCoordinates","CALLBACK_METHODS","Textarea","_Editor","method","bind","startListening","stopListening","getAfterCursor","focus","dispatchEvent","Event","elOffset","elScroll","getElScroll","cursorPosition","getCursorPosition","dir","clientWidth","substring","selectionEnd","scrollTop","scrollLeft","emitChangeEvent","getCode","emitMoveEvent","emitEnterEvent","emitEscEvent","addEventListener","onInput","onKeydown","removeEventListener","_completer","_completer2","_dropdown","_dropdown2","_strategy2","Textcomplete","editor","completer","isQueryInFlight","nextPendingQuery","dropdown","destroyEditor","strategyPropsArray","registerStrategy","run","_ref","render","getCursorOffset","trigger","up","down","select","applySearchResult","_this3","handleMove","handleEnter","handleEsc","handleChange","handleSelect","eventName","handleHit","g","eval","Completer","strategies","query","extractQuery","execute","handleQueryResult","buildQuery","CLASS_NAME","ACTIVE_CLASS_NAME","DropdownItem","onClick","onMouseover","siblings","a","nextIndex","global","_textcomplete","_textcomplete2","_textarea","_textarea2","editors","_search_result2","Query","result","isBrowser","debug","querySelector","div","computed","currentStyle","whiteSpace","wordWrap","visibility","properties","prop","isFirefox","scrollHeight","overflowY","overflow","textContent","span","coordinates","offsetTop","offsetLeft","backgroundColor","mozInnerScreenX","createInputEvent","bubbles","initEvent","headToCursor","cursorToTail","curr","next","activeElement","aLength","cLength","Math","min","setSelectionRange","strB2","execCommand"],"mappings":"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","file":"textcomplete.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 11);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _strategy = __webpack_require__(1);\n\nvar _strategy2 = _interopRequireDefault(_strategy);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Encapsulate an result of each search results.\n */\nvar SearchResult = function () {\n\n  /**\n   * @param {object} data - An element of array callbacked by search function.\n   */\n  function SearchResult(data, term, strategy) {\n    _classCallCheck(this, SearchResult);\n\n    this.data = data;\n    this.term = term;\n    this.strategy = strategy;\n  }\n\n  _createClass(SearchResult, [{\n    key: 'replace',\n    value: function replace(beforeCursor, afterCursor) {\n      var replacement = this.strategy.replace(this.data);\n      if (replacement !== null) {\n        if (Array.isArray(replacement)) {\n          afterCursor = replacement[1] + afterCursor;\n          replacement = replacement[0];\n        }\n        var match = this.strategy.matchText(beforeCursor);\n        if (match) {\n          replacement = replacement.replace(/\\$&/g, match[0]).replace(/\\$(\\d+)/g, function (_, p1) {\n            return match[parseInt(p1, 10)];\n          });\n          return [[beforeCursor.slice(0, match.index), replacement, beforeCursor.slice(match.index + match[0].length)].join(''), afterCursor];\n        }\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return this.strategy.template(this.data, this.term);\n    }\n  }]);\n\n  return SearchResult;\n}();\n\nexports.default = SearchResult;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _query = __webpack_require__(12);\n\nvar _query2 = _interopRequireDefault(_query);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DEFAULT_INDEX = 2;\n\nfunction DEFAULT_TEMPLATE(value) {\n  return value;\n}\n\n/**\n * Properties for a strategy.\n *\n * @typedef\n */\n\n/**\n * Encapsulate a single strategy.\n */\nvar Strategy = function () {\n  function Strategy(props) {\n    _classCallCheck(this, Strategy);\n\n    this.props = props;\n    this.cache = props.cache ? {} : null;\n  }\n\n  /**\n   * @return {this}\n   */\n\n\n  _createClass(Strategy, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.cache = null;\n      return this;\n    }\n\n    /**\n     * Build a Query object by the given string if this matches to the string.\n     *\n     * @param {string} text - Head to input cursor.\n     */\n\n  }, {\n    key: 'buildQuery',\n    value: function buildQuery(text) {\n      if (typeof this.props.context === 'function') {\n        var _context = this.props.context(text);\n        if (typeof _context === 'string') {\n          text = _context;\n        } else if (!_context) {\n          return null;\n        }\n      }\n      var match = this.matchText(text);\n      return match ? new _query2.default(this, match[this.index], match) : null;\n    }\n  }, {\n    key: 'search',\n    value: function search(term, callback, match) {\n      if (this.cache) {\n        this.searchWithCache(term, callback, match);\n      } else {\n        this.props.search(term, callback, match);\n      }\n    }\n\n    /**\n     * @param {object} data - An element of array callbacked by search function.\n     */\n\n  }, {\n    key: 'replace',\n    value: function replace(data) {\n      return this.props.replace(data);\n    }\n\n    /** @private */\n\n  }, {\n    key: 'searchWithCache',\n    value: function searchWithCache(term, callback, match) {\n      var _this = this;\n\n      if (this.cache && this.cache[term]) {\n        callback(this.cache[term]);\n      } else {\n        this.props.search(term, function (results) {\n          if (_this.cache) {\n            _this.cache[term] = results;\n          }\n          callback(results);\n        }, match);\n      }\n    }\n\n    /** @private */\n\n  }, {\n    key: 'matchText',\n    value: function matchText(text) {\n      if (typeof this.match === 'function') {\n        return this.match(text);\n      } else {\n        return text.match(this.match);\n      }\n    }\n\n    /** @private */\n\n  }, {\n    key: 'match',\n    get: function get() {\n      return this.props.match;\n    }\n\n    /** @private */\n\n  }, {\n    key: 'index',\n    get: function get() {\n      return typeof this.props.index === 'number' ? this.props.index : DEFAULT_INDEX;\n    }\n  }, {\n    key: 'template',\n    get: function get() {\n      return this.props.template || DEFAULT_TEMPLATE;\n    }\n  }]);\n\n  return Strategy;\n}();\n\nexports.default = Strategy;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @api private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {Mixed} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Boolean} exists Only check if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {Mixed} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n         listeners.fn === fn\n      && (!once || listeners.once)\n      && (!context || listeners.context === context)\n    ) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n           listeners[i].fn !== fn\n        || (once && !listeners[i].once)\n        || (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {String|Symbol} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif (true) {\n  module.exports = EventEmitter;\n}\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calculateElementOffset = calculateElementOffset;\nexports.getLineHeightPx = getLineHeightPx;\n\n\n/**\n * Create a custom event\n *\n * @private\n */\nvar createCustomEvent = exports.createCustomEvent = function () {\n  if (typeof window.CustomEvent === 'function') {\n    return function (type, options) {\n      return new document.defaultView.CustomEvent(type, {\n        cancelable: options && options.cancelable || false,\n        detail: options && options.detail || undefined\n      });\n    };\n  } else {\n    // Custom event polyfill from\n    // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#polyfill\n    return function (type, options) {\n      var event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type,\n      /* bubbles */false, options && options.cancelable || false, options && options.detail || undefined);\n      return event;\n    };\n  }\n}();\n\n/**\n * Get the current coordinates of the `el` relative to the document.\n *\n * @private\n */\nfunction calculateElementOffset(el) {\n  var rect = el.getBoundingClientRect();\n  var _el$ownerDocument = el.ownerDocument,\n      defaultView = _el$ownerDocument.defaultView,\n      documentElement = _el$ownerDocument.documentElement;\n\n  var offset = { top: rect.top + defaultView.pageYOffset, left: rect.left + defaultView.pageXOffset };\n  if (documentElement) {\n    offset.top -= documentElement.clientTop;\n    offset.left -= documentElement.clientLeft;\n  }\n  return offset;\n}\n\nvar CHAR_CODE_ZERO = '0'.charCodeAt(0);\nvar CHAR_CODE_NINE = '9'.charCodeAt(0);\n\nfunction isDigit(charCode) {\n  return charCode >= CHAR_CODE_ZERO && charCode <= CHAR_CODE_NINE;\n}\n\n/**\n * Returns the line-height of the given node in pixels.\n *\n * @private\n */\nfunction getLineHeightPx(node) {\n  var computedStyle = window.getComputedStyle(node);\n\n  // If the char code starts with a digit, it is either a value in pixels,\n  // or unitless, as per:\n  // https://drafts.csswg.org/css2/visudet.html#propdef-line-height\n  // https://drafts.csswg.org/css2/cascade.html#computed-value\n  if (isDigit(computedStyle.lineHeight.charCodeAt(0))) {\n    // In real browsers the value is *always* in pixels, even for unit-less\n    // line-heights. However, we still check as per the spec.\n    if (isDigit(computedStyle.lineHeight.charCodeAt(computedStyle.lineHeight.length - 1))) {\n      return parseFloat(computedStyle.lineHeight) * parseFloat(computedStyle.fontSize);\n    } else {\n      return parseFloat(computedStyle.lineHeight);\n    }\n  }\n\n  // Otherwise, the value is \"normal\".\n  // If the line-height is \"normal\", calculate by font-size\n  var body = document.body;\n  if (!body) {\n    return 0;\n  }\n  var tempNode = document.createElement(node.nodeName);\n  tempNode.innerHTML = '&nbsp;';\n  tempNode.style.fontSize = computedStyle.fontSize;\n  tempNode.style.fontFamily = computedStyle.fontFamily;\n  body.appendChild(tempNode);\n  // Assume the height of the element is the line-height\n  var height = tempNode.offsetHeight;\n  body.removeChild(tempNode);\n  return height;\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _eventemitter = __webpack_require__(2);\n\nvar _eventemitter2 = _interopRequireDefault(_eventemitter);\n\nvar _dropdown_item = __webpack_require__(10);\n\nvar _dropdown_item2 = _interopRequireDefault(_dropdown_item);\n\nvar _search_result = __webpack_require__(0);\n\nvar _search_result2 = _interopRequireDefault(_search_result);\n\nvar _utils = __webpack_require__(3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DEFAULT_CLASS_NAME = 'dropdown-menu textcomplete-dropdown';\n\n/** @typedef */\n\n/**\n * Encapsulate a dropdown view.\n *\n * @prop {boolean} shown - Whether the #el is shown or not.\n * @prop {DropdownItem[]} items - The array of rendered dropdown items.\n */\nvar Dropdown = function (_EventEmitter) {\n  _inherits(Dropdown, _EventEmitter);\n\n  _createClass(Dropdown, null, [{\n    key: 'createElement',\n    value: function createElement() {\n      var el = document.createElement('ul');\n      var style = el.style;\n      style.display = 'none';\n      style.position = 'absolute';\n      style.zIndex = '10000';\n      var body = document.body;\n      if (body) {\n        body.appendChild(el);\n      }\n      return el;\n    }\n  }]);\n\n  function Dropdown(options) {\n    _classCallCheck(this, Dropdown);\n\n    var _this = _possibleConstructorReturn(this, (Dropdown.__proto__ || Object.getPrototypeOf(Dropdown)).call(this));\n\n    _this.shown = false;\n    _this.items = [];\n    _this.footer = options.footer;\n    _this.header = options.header;\n    _this.maxCount = options.maxCount || 10;\n    _this.el.className = options.className || DEFAULT_CLASS_NAME;\n    _this.rotate = options.hasOwnProperty('rotate') ? options.rotate : true;\n    _this.placement = options.placement;\n    var style = options.style;\n    if (style) {\n      Object.keys(style).forEach(function (key) {\n        _this.el.style[key] = style[key];\n      });\n    }\n    return _this;\n  }\n\n  /**\n   * @return {this}\n   */\n\n\n  _createClass(Dropdown, [{\n    key: 'destroy',\n    value: function destroy() {\n      var parentNode = this.el.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(this.el);\n      }\n      this.clear()._el = null;\n      return this;\n    }\n  }, {\n    key: 'render',\n\n\n    /**\n     * Render the given data as dropdown items.\n     *\n     * @return {this}\n     */\n    value: function render(searchResults, cursorOffset) {\n      var renderEvent = (0, _utils.createCustomEvent)('render', { cancelable: true });\n      this.emit('render', renderEvent);\n      if (renderEvent.defaultPrevented) {\n        return this;\n      }\n      var rawResults = searchResults.map(function (searchResult) {\n        return searchResult.data;\n      });\n      var dropdownItems = searchResults.slice(0, this.maxCount || searchResults.length).map(function (searchResult) {\n        return new _dropdown_item2.default(searchResult);\n      });\n      this.clear().setStrategyId(searchResults[0]).renderEdge(rawResults, 'header').append(dropdownItems).renderEdge(rawResults, 'footer').setOffset(cursorOffset).show();\n      this.emit('rendered', (0, _utils.createCustomEvent)('rendered'));\n      return this;\n    }\n\n    /**\n     * Hide the dropdown then sweep out items.\n     *\n     * @return {this}\n     */\n\n  }, {\n    key: 'deactivate',\n    value: function deactivate() {\n      return this.hide().clear();\n    }\n\n    /**\n     * @return {this}\n     */\n\n  }, {\n    key: 'select',\n    value: function select(dropdownItem) {\n      var detail = { searchResult: dropdownItem.searchResult };\n      var selectEvent = (0, _utils.createCustomEvent)('select', { cancelable: true, detail: detail });\n      this.emit('select', selectEvent);\n      if (selectEvent.defaultPrevented) {\n        return this;\n      }\n      this.deactivate();\n      this.emit('selected', (0, _utils.createCustomEvent)('selected', { detail: detail }));\n      return this;\n    }\n\n    /**\n     * @return {this}\n     */\n\n  }, {\n    key: 'up',\n    value: function up(e) {\n      return this.shown ? this.moveActiveItem('prev', e) : this;\n    }\n\n    /**\n     * @return {this}\n     */\n\n  }, {\n    key: 'down',\n    value: function down(e) {\n      return this.shown ? this.moveActiveItem('next', e) : this;\n    }\n\n    /**\n     * Retrieve the active item.\n     */\n\n  }, {\n    key: 'getActiveItem',\n    value: function getActiveItem() {\n      return this.items.find(function (item) {\n        return item.active;\n      });\n    }\n\n    /**\n     * Add items to dropdown.\n     *\n     * @private\n     */\n\n  }, {\n    key: 'append',\n    value: function append(items) {\n      var _this2 = this;\n\n      var fragment = document.createDocumentFragment();\n      items.forEach(function (item) {\n        _this2.items.push(item);\n        item.appended(_this2);\n        fragment.appendChild(item.el);\n      });\n      this.el.appendChild(fragment);\n      return this;\n    }\n\n    /** @private */\n\n  }, {\n    key: 'setOffset',\n    value: function setOffset(cursorOffset) {\n      if (cursorOffset.left) {\n        this.el.style.left = cursorOffset.left + 'px';\n      } else if (cursorOffset.right) {\n        this.el.style.right = cursorOffset.right + 'px';\n      }\n\n      var element = document.documentElement;\n      var forceTop = false;\n\n      if (this.isPlacementAuto()) {\n        var dropdownHeight = this.items.length * cursorOffset.lineHeight;\n\n        if (cursorOffset.clientTop + dropdownHeight > element.clientHeight) {\n          forceTop = true;\n        }\n      }\n\n      if (this.isPlacementTop() || forceTop) {\n        if (element) {\n          this.el.style.bottom = element.clientHeight - cursorOffset.top + cursorOffset.lineHeight + 'px';\n          this.el.style.top = 'auto';\n        }\n      } else {\n        this.el.style.top = cursorOffset.top + 'px';\n        this.el.style.bottom = 'auto';\n      }\n      return this;\n    }\n\n    /**\n     * Show the element.\n     *\n     * @private\n     */\n\n  }, {\n    key: 'show',\n    value: function show() {\n      if (!this.shown) {\n        var showEvent = (0, _utils.createCustomEvent)('show', { cancelable: true });\n        this.emit('show', showEvent);\n        if (showEvent.defaultPrevented) {\n          return this;\n        }\n        this.el.style.display = 'block';\n        this.shown = true;\n        this.emit('shown', (0, _utils.createCustomEvent)('shown'));\n      }\n      return this;\n    }\n\n    /**\n     * Hide the element.\n     *\n     * @private\n     */\n\n  }, {\n    key: 'hide',\n    value: function hide() {\n      if (this.shown) {\n        var hideEvent = (0, _utils.createCustomEvent)('hide', { cancelable: true });\n        this.emit('hide', hideEvent);\n        if (hideEvent.defaultPrevented) {\n          return this;\n        }\n        this.el.style.display = 'none';\n        this.shown = false;\n        this.emit('hidden', (0, _utils.createCustomEvent)('hidden'));\n      }\n      return this;\n    }\n\n    /**\n     * Clear search results.\n     *\n     * @private\n     */\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.el.innerHTML = '';\n      this.items.forEach(function (item) {\n        return item.destroy();\n      });\n      this.items = [];\n      return this;\n    }\n\n    /** @private */\n\n  }, {\n    key: 'moveActiveItem',\n    value: function moveActiveItem(name, e) {\n      var activeItem = this.getActiveItem();\n      var nextActiveItem = void 0;\n      if (activeItem) {\n        nextActiveItem = activeItem[name];\n      } else {\n        nextActiveItem = name === 'next' ? this.items[0] : this.items[this.items.length - 1];\n      }\n      if (nextActiveItem) {\n        nextActiveItem.activate();\n        e.preventDefault();\n      }\n      return this;\n    }\n\n    /** @private */\n\n  }, {\n    key: 'setStrategyId',\n    value: function setStrategyId(searchResult) {\n      var strategyId = searchResult && searchResult.strategy.props.id;\n      if (strategyId) {\n        this.el.setAttribute('data-strategy', strategyId);\n      } else {\n        this.el.removeAttribute('data-strategy');\n      }\n      return this;\n    }\n\n    /**\n     * @private\n     * @param {object[]} rawResults - What callbacked by search function.\n     */\n\n  }, {\n    key: 'renderEdge',\n    value: function renderEdge(rawResults, type) {\n      var source = (type === 'header' ? this.header : this.footer) || '';\n      var content = typeof source === 'function' ? source(rawResults) : source;\n      var li = document.createElement('li');\n      li.classList.add('textcomplete-' + type);\n      li.innerHTML = content;\n      this.el.appendChild(li);\n      return this;\n    }\n\n    /** @private */\n\n  }, {\n    key: 'isPlacementTop',\n    value: function isPlacementTop() {\n      return this.placement === 'top';\n    }\n  }, {\n    key: 'isPlacementAuto',\n    value: function isPlacementAuto() {\n      return this.placement === 'auto';\n    }\n  }, {\n    key: 'el',\n    get: function get() {\n      if (!this._el) {\n        this._el = Dropdown.createElement();\n      }\n      return this._el;\n    }\n  }]);\n\n  return Dropdown;\n}(_eventemitter2.default);\n\nexports.default = Dropdown;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _eventemitter = __webpack_require__(2);\n\nvar _eventemitter2 = _interopRequireDefault(_eventemitter);\n\nvar _utils = __webpack_require__(3);\n\nvar _search_result = __webpack_require__(0);\n\nvar _search_result2 = _interopRequireDefault(_search_result);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Abstract class representing a editor target.\n *\n * Editor classes must implement `#applySearchResult`, `#getCursorOffset`,\n * `#getBeforeCursor` and `#getAfterCursor` methods.\n *\n * @abstract\n */\n\n\n/** @typedef */\nvar Editor = function (_EventEmitter) {\n  _inherits(Editor, _EventEmitter);\n\n  function Editor() {\n    _classCallCheck(this, Editor);\n\n    return _possibleConstructorReturn(this, (Editor.__proto__ || Object.getPrototypeOf(Editor)).apply(this, arguments));\n  }\n\n  _createClass(Editor, [{\n    key: 'destroy',\n\n    /**\n     * It is called when associated textcomplete object is destroyed.\n     *\n     * @return {this}\n     */\n    value: function destroy() {\n      return this;\n    }\n\n    /**\n     * It is called when a search result is selected by a user.\n     */\n\n  }, {\n    key: 'applySearchResult',\n    value: function applySearchResult(_) {\n      throw new Error('Not implemented.');\n    }\n\n    /**\n     * The input cursor's absolute coordinates from the window's left\n     * top corner.\n     */\n\n  }, {\n    key: 'getCursorOffset',\n    value: function getCursorOffset() {\n      throw new Error('Not implemented.');\n    }\n\n    /**\n     * Editor string value from head to cursor.\n     */\n\n  }, {\n    key: 'getBeforeCursor',\n    value: function getBeforeCursor() {\n      throw new Error('Not implemented.');\n    }\n\n    /**\n     * Editor string value from cursor to tail.\n     */\n\n  }, {\n    key: 'getAfterCursor',\n    value: function getAfterCursor() {\n      throw new Error('Not implemented.');\n    }\n\n    /** @private */\n\n  }, {\n    key: 'emitMoveEvent',\n    value: function emitMoveEvent(code) {\n      var moveEvent = (0, _utils.createCustomEvent)('move', {\n        cancelable: true,\n        detail: {\n          code: code\n        }\n      });\n      this.emit('move', moveEvent);\n      return moveEvent;\n    }\n\n    /** @private */\n\n  }, {\n    key: 'emitEnterEvent',\n    value: function emitEnterEvent() {\n      var enterEvent = (0, _utils.createCustomEvent)('enter', { cancelable: true });\n      this.emit('enter', enterEvent);\n      return enterEvent;\n    }\n\n    /** @private */\n\n  }, {\n    key: 'emitChangeEvent',\n    value: function emitChangeEvent() {\n      var changeEvent = (0, _utils.createCustomEvent)('change', {\n        detail: {\n          beforeCursor: this.getBeforeCursor()\n        }\n      });\n      this.emit('change', changeEvent);\n      return changeEvent;\n    }\n\n    /** @private */\n\n  }, {\n    key: 'emitEscEvent',\n    value: function emitEscEvent() {\n      var escEvent = (0, _utils.createCustomEvent)('esc', { cancelable: true });\n      this.emit('esc', escEvent);\n      return escEvent;\n    }\n\n    /** @private */\n\n  }, {\n    key: 'getCode',\n    value: function getCode(e) {\n      return e.keyCode === 8 ? 'BS' // backspace\n      : e.keyCode === 9 ? 'ENTER' // tab\n      : e.keyCode === 13 ? 'ENTER' // enter\n      : e.keyCode === 16 ? 'META' // shift\n      : e.keyCode === 17 ? 'META' // ctrl\n      : e.keyCode === 18 ? 'META' // alt\n      : e.keyCode === 27 ? 'ESC' // esc\n      : e.keyCode === 38 ? 'UP' // up\n      : e.keyCode === 40 ? 'DOWN' // down\n      : e.keyCode === 78 && e.ctrlKey ? 'DOWN' // ctrl-n\n      : e.keyCode === 80 && e.ctrlKey ? 'UP' // ctrl-p\n      : e.keyCode === 91 ? 'META' // left command\n      : e.keyCode === 93 ? 'META' // right command\n      : 'OTHER';\n    }\n  }]);\n\n  return Editor;\n}(_eventemitter2.default);\n\nexports.default = Editor;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _update = __webpack_require__(14);\n\nvar _update2 = _interopRequireDefault(_update);\n\nvar _editor = __webpack_require__(5);\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _utils = __webpack_require__(3);\n\nvar _search_result = __webpack_require__(0);\n\nvar _search_result2 = _interopRequireDefault(_search_result);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar getCaretCoordinates = __webpack_require__(13);\n\nvar CALLBACK_METHODS = ['onInput', 'onKeydown'];\n\n/**\n * Encapsulate the target textarea element.\n */\n\nvar Textarea = function (_Editor) {\n  _inherits(Textarea, _Editor);\n\n  /**\n   * @param {HTMLTextAreaElement} el - Where the textcomplete works on.\n   */\n  function Textarea(el) {\n    _classCallCheck(this, Textarea);\n\n    var _this = _possibleConstructorReturn(this, (Textarea.__proto__ || Object.getPrototypeOf(Textarea)).call(this));\n\n    _this.el = el;\n\n    CALLBACK_METHODS.forEach(function (method) {\n      _this[method] = _this[method].bind(_this);\n    });\n\n    _this.startListening();\n    return _this;\n  }\n\n  /**\n   * @return {this}\n   */\n\n\n  _createClass(Textarea, [{\n    key: 'destroy',\n    value: function destroy() {\n      _get(Textarea.prototype.__proto__ || Object.getPrototypeOf(Textarea.prototype), 'destroy', this).call(this);\n      this.stopListening();\n      // Release the element reference early to help garbage collection.\n      this.el = null;\n      return this;\n    }\n\n    /**\n     * Implementation for {@link Editor#applySearchResult}\n     */\n\n  }, {\n    key: 'applySearchResult',\n    value: function applySearchResult(searchResult) {\n      var replace = searchResult.replace(this.getBeforeCursor(), this.getAfterCursor());\n      if (this.getBeforeCursor() !== replace[0]) {\n        this.el.focus(); // Clicking a dropdown item removes focus from the element.\n        if (Array.isArray(replace)) {\n          (0, _update2.default)(this.el, replace[0], replace[1]);\n          this.el.dispatchEvent(new Event('input'));\n        }\n      }\n    }\n\n    /**\n     * Implementation for {@link Editor#getCursorOffset}\n     */\n\n  }, {\n    key: 'getCursorOffset',\n    value: function getCursorOffset() {\n      var elOffset = (0, _utils.calculateElementOffset)(this.el);\n      var elScroll = this.getElScroll();\n      var cursorPosition = this.getCursorPosition();\n      var lineHeight = (0, _utils.getLineHeightPx)(this.el);\n      var top = elOffset.top - elScroll.top + cursorPosition.top + lineHeight;\n      var left = elOffset.left - elScroll.left + cursorPosition.left;\n      var clientTop = this.el.getBoundingClientRect().top;\n      if (this.el.dir !== 'rtl') {\n        return { top: top, left: left, lineHeight: lineHeight, clientTop: clientTop };\n      } else {\n        var right = document.documentElement ? document.documentElement.clientWidth - left : 0;\n        return { top: top, right: right, lineHeight: lineHeight, clientTop: clientTop };\n      }\n    }\n\n    /**\n     * Implementation for {@link Editor#getBeforeCursor}\n     */\n\n  }, {\n    key: 'getBeforeCursor',\n    value: function getBeforeCursor() {\n      return this.el.value.substring(0, this.el.selectionEnd);\n    }\n\n    /**\n     * Implementation for {@link Editor#getAfterCursor}\n     */\n\n  }, {\n    key: 'getAfterCursor',\n    value: function getAfterCursor() {\n      return this.el.value.substring(this.el.selectionEnd);\n    }\n\n    /** @private */\n\n  }, {\n    key: 'getElScroll',\n    value: function getElScroll() {\n      return { top: this.el.scrollTop, left: this.el.scrollLeft };\n    }\n\n    /**\n     * The input cursor's relative coordinates from the textarea's left\n     * top corner.\n     *\n     * @private\n     */\n\n  }, {\n    key: 'getCursorPosition',\n    value: function getCursorPosition() {\n      return getCaretCoordinates(this.el, this.el.selectionEnd);\n    }\n\n    /** @private */\n\n  }, {\n    key: 'onInput',\n    value: function onInput(_) {\n      this.emitChangeEvent();\n    }\n\n    /** @private */\n\n  }, {\n    key: 'onKeydown',\n    value: function onKeydown(e) {\n      var code = this.getCode(e);\n      var event = void 0;\n      if (code === 'UP' || code === 'DOWN') {\n        event = this.emitMoveEvent(code);\n      } else if (code === 'ENTER') {\n        event = this.emitEnterEvent();\n      } else if (code === 'ESC') {\n        event = this.emitEscEvent();\n      }\n      if (event && event.defaultPrevented) {\n        e.preventDefault();\n      }\n    }\n\n    /** @private */\n\n  }, {\n    key: 'startListening',\n    value: function startListening() {\n      this.el.addEventListener('input', this.onInput);\n      this.el.addEventListener('keydown', this.onKeydown);\n    }\n\n    /** @private */\n\n  }, {\n    key: 'stopListening',\n    value: function stopListening() {\n      this.el.removeEventListener('input', this.onInput);\n      this.el.removeEventListener('keydown', this.onKeydown);\n    }\n  }]);\n\n  return Textarea;\n}(_editor2.default);\n\nexports.default = Textarea;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _completer = __webpack_require__(9);\n\nvar _completer2 = _interopRequireDefault(_completer);\n\nvar _editor = __webpack_require__(5);\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _dropdown = __webpack_require__(4);\n\nvar _dropdown2 = _interopRequireDefault(_dropdown);\n\nvar _strategy = __webpack_require__(1);\n\nvar _strategy2 = _interopRequireDefault(_strategy);\n\nvar _search_result = __webpack_require__(0);\n\nvar _search_result2 = _interopRequireDefault(_search_result);\n\nvar _eventemitter = __webpack_require__(2);\n\nvar _eventemitter2 = _interopRequireDefault(_eventemitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CALLBACK_METHODS = ['handleChange', 'handleEnter', 'handleEsc', 'handleHit', 'handleMove', 'handleSelect'];\n\n/** @typedef */\n\n/**\n * The core of textcomplete. It acts as a mediator.\n */\nvar Textcomplete = function (_EventEmitter) {\n  _inherits(Textcomplete, _EventEmitter);\n\n  /**\n   * @param {Editor} editor - Where the textcomplete works on.\n   */\n  function Textcomplete(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Textcomplete);\n\n    var _this = _possibleConstructorReturn(this, (Textcomplete.__proto__ || Object.getPrototypeOf(Textcomplete)).call(this));\n\n    _this.completer = new _completer2.default();\n    _this.isQueryInFlight = false;\n    _this.nextPendingQuery = null;\n    _this.dropdown = new _dropdown2.default(options.dropdown || {});\n    _this.editor = editor;\n    _this.options = options;\n\n    CALLBACK_METHODS.forEach(function (method) {\n      _this[method] = _this[method].bind(_this);\n    });\n\n    _this.startListening();\n    return _this;\n  }\n\n  /**\n   * @return {this}\n   */\n\n\n  _createClass(Textcomplete, [{\n    key: 'destroy',\n    value: function destroy() {\n      var destroyEditor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this.completer.destroy();\n      this.dropdown.destroy();\n      if (destroyEditor) {\n        this.editor.destroy();\n      }\n      this.stopListening();\n      return this;\n    }\n\n    /**\n     * @return {this}\n     * @example\n     * textcomplete.register([{\n     *   match: /(^|\\s)(\\w+)$/,\n     *   search: function (term, callback) {\n     *     $.ajax({ ... })\n     *       .done(callback)\n     *       .fail([]);\n     *   },\n     *   replace: function (value) {\n     *     return '$1' + value + ' ';\n     *   }\n     * }]);\n     */\n\n  }, {\n    key: 'register',\n    value: function register(strategyPropsArray) {\n      var _this2 = this;\n\n      strategyPropsArray.forEach(function (props) {\n        _this2.completer.registerStrategy(new _strategy2.default(props));\n      });\n      return this;\n    }\n\n    /**\n     * Start autocompleting.\n     *\n     * @param {string} text - Head to input cursor.\n     * @return {this}\n     */\n\n  }, {\n    key: 'trigger',\n    value: function trigger(text) {\n      if (this.isQueryInFlight) {\n        this.nextPendingQuery = text;\n      } else {\n        this.isQueryInFlight = true;\n        this.nextPendingQuery = null;\n        this.completer.run(text);\n      }\n      return this;\n    }\n\n    /** @private */\n\n  }, {\n    key: 'handleHit',\n    value: function handleHit(_ref) {\n      var searchResults = _ref.searchResults;\n\n      if (searchResults.length) {\n        this.dropdown.render(searchResults, this.editor.getCursorOffset());\n      } else {\n        this.dropdown.deactivate();\n      }\n      this.isQueryInFlight = false;\n      if (this.nextPendingQuery !== null) {\n        this.trigger(this.nextPendingQuery);\n      }\n    }\n\n    /** @private */\n\n  }, {\n    key: 'handleMove',\n    value: function handleMove(e) {\n      e.detail.code === 'UP' ? this.dropdown.up(e) : this.dropdown.down(e);\n    }\n\n    /** @private */\n\n  }, {\n    key: 'handleEnter',\n    value: function handleEnter(e) {\n      var activeItem = this.dropdown.getActiveItem();\n      if (activeItem) {\n        this.dropdown.select(activeItem);\n        e.preventDefault();\n      }\n    }\n\n    /** @private */\n\n  }, {\n    key: 'handleEsc',\n    value: function handleEsc(e) {\n      if (this.dropdown.shown) {\n        this.dropdown.deactivate();\n        e.preventDefault();\n      }\n    }\n\n    /** @private */\n\n  }, {\n    key: 'handleChange',\n    value: function handleChange(e) {\n      this.trigger(e.detail.beforeCursor);\n    }\n\n    /** @private */\n\n  }, {\n    key: 'handleSelect',\n    value: function handleSelect(selectEvent) {\n      this.emit('select', selectEvent);\n      if (!selectEvent.defaultPrevented) {\n        this.editor.applySearchResult(selectEvent.detail.searchResult);\n      }\n    }\n\n    /** @private */\n\n  }, {\n    key: 'startListening',\n    value: function startListening() {\n      var _this3 = this;\n\n      this.editor.on('move', this.handleMove).on('enter', this.handleEnter).on('esc', this.handleEsc).on('change', this.handleChange);\n      this.dropdown.on('select', this.handleSelect);\n      ['show', 'shown', 'render', 'rendered', 'selected', 'hidden', 'hide'].forEach(function (eventName) {\n        _this3.dropdown.on(eventName, function () {\n          return _this3.emit(eventName);\n        });\n      });\n      this.completer.on('hit', this.handleHit);\n    }\n\n    /** @private */\n\n  }, {\n    key: 'stopListening',\n    value: function stopListening() {\n      this.completer.removeAllListeners();\n      this.dropdown.removeAllListeners();\n      this.editor.removeListener('move', this.handleMove).removeListener('enter', this.handleEnter).removeListener('esc', this.handleEsc).removeListener('change', this.handleChange);\n    }\n  }]);\n\n  return Textcomplete;\n}(_eventemitter2.default);\n\nexports.default = Textcomplete;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _eventemitter = __webpack_require__(2);\n\nvar _eventemitter2 = _interopRequireDefault(_eventemitter);\n\nvar _strategy = __webpack_require__(1);\n\nvar _strategy2 = _interopRequireDefault(_strategy);\n\nvar _search_result = __webpack_require__(0);\n\nvar _search_result2 = _interopRequireDefault(_search_result);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CALLBACK_METHODS = ['handleQueryResult'];\n\n/**\n * Complete engine.\n */\n\nvar Completer = function (_EventEmitter) {\n  _inherits(Completer, _EventEmitter);\n\n  function Completer() {\n    _classCallCheck(this, Completer);\n\n    var _this = _possibleConstructorReturn(this, (Completer.__proto__ || Object.getPrototypeOf(Completer)).call(this));\n\n    _this.strategies = [];\n\n    CALLBACK_METHODS.forEach(function (method) {\n      _this[method] = _this[method].bind(_this);\n    });\n    return _this;\n  }\n\n  /**\n   * @return {this}\n   */\n\n\n  _createClass(Completer, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.strategies.forEach(function (strategy) {\n        return strategy.destroy();\n      });\n      return this;\n    }\n\n    /**\n     * Register a strategy to the completer.\n     *\n     * @return {this}\n     */\n\n  }, {\n    key: 'registerStrategy',\n    value: function registerStrategy(strategy) {\n      this.strategies.push(strategy);\n      return this;\n    }\n\n    /**\n     * @param {string} text - Head to input cursor.\n     */\n\n  }, {\n    key: 'run',\n    value: function run(text) {\n      var query = this.extractQuery(text);\n      if (query) {\n        query.execute(this.handleQueryResult);\n      } else {\n        this.handleQueryResult([]);\n      }\n    }\n\n    /**\n     * Find a query, which matches to the given text.\n     *\n     * @private\n     */\n\n  }, {\n    key: 'extractQuery',\n    value: function extractQuery(text) {\n      for (var i = 0; i < this.strategies.length; i++) {\n        var query = this.strategies[i].buildQuery(text);\n        if (query) {\n          return query;\n        }\n      }\n      return null;\n    }\n\n    /**\n     * Callbacked by {@link Query#execute}.\n     *\n     * @private\n     */\n\n  }, {\n    key: 'handleQueryResult',\n    value: function handleQueryResult(searchResults) {\n      this.emit('hit', { searchResults: searchResults });\n    }\n  }]);\n\n  return Completer;\n}(_eventemitter2.default);\n\nexports.default = Completer;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CLASS_NAME = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _dropdown = __webpack_require__(4);\n\nvar _dropdown2 = _interopRequireDefault(_dropdown);\n\nvar _search_result = __webpack_require__(0);\n\nvar _search_result2 = _interopRequireDefault(_search_result);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CLASS_NAME = exports.CLASS_NAME = 'textcomplete-item';\nvar ACTIVE_CLASS_NAME = CLASS_NAME + ' active';\nvar CALLBACK_METHODS = ['onClick', 'onMouseover'];\n\n/**\n * Encapsulate an item of dropdown.\n */\n\nvar DropdownItem = function () {\n  function DropdownItem(searchResult) {\n    var _this = this;\n\n    _classCallCheck(this, DropdownItem);\n\n    this.searchResult = searchResult;\n    this.active = false;\n\n    CALLBACK_METHODS.forEach(function (method) {\n      _this[method] = _this[method].bind(_this);\n    });\n  }\n\n  _createClass(DropdownItem, [{\n    key: 'destroy',\n\n\n    /**\n     * Try to free resources and perform other cleanup operations.\n     */\n    value: function destroy() {\n      this.el.removeEventListener('mousedown', this.onClick, false);\n      this.el.removeEventListener('mouseover', this.onMouseover, false);\n      this.el.removeEventListener('touchstart', this.onClick, false);\n      // This element has already been removed by {@link Dropdown#clear}.\n      this._el = null;\n    }\n\n    /**\n     * Callbacked when it is appended to a dropdown.\n     *\n     * @see Dropdown#append\n     */\n\n  }, {\n    key: 'appended',\n    value: function appended(dropdown) {\n      this.dropdown = dropdown;\n      this.siblings = dropdown.items;\n      this.index = this.siblings.length - 1;\n    }\n\n    /**\n     * Deactivate active item then activate itself.\n     *\n     * @return {this}\n     */\n\n  }, {\n    key: 'activate',\n    value: function activate() {\n      if (!this.active) {\n        var activeItem = this.dropdown.getActiveItem();\n        if (activeItem) {\n          activeItem.deactivate();\n        }\n        this.active = true;\n        this.el.className = ACTIVE_CLASS_NAME;\n      }\n      return this;\n    }\n\n    /**\n     * Get the next sibling.\n     */\n\n  }, {\n    key: 'deactivate',\n\n\n    /** @private */\n    value: function deactivate() {\n      if (this.active) {\n        this.active = false;\n        this.el.className = CLASS_NAME;\n      }\n      return this;\n    }\n\n    /** @private */\n\n  }, {\n    key: 'onClick',\n    value: function onClick(e) {\n      e.preventDefault(); // Prevent blur event\n      this.dropdown.select(this);\n    }\n\n    /** @private */\n\n  }, {\n    key: 'onMouseover',\n    value: function onMouseover(_) {\n      this.activate();\n    }\n  }, {\n    key: 'el',\n    get: function get() {\n      if (this._el) {\n        return this._el;\n      }\n      var li = document.createElement('li');\n      li.className = this.active ? ACTIVE_CLASS_NAME : CLASS_NAME;\n      var a = document.createElement('a');\n      a.innerHTML = this.searchResult.render();\n      li.appendChild(a);\n      this._el = li;\n      li.addEventListener('mousedown', this.onClick);\n      li.addEventListener('mouseover', this.onMouseover);\n      li.addEventListener('touchstart', this.onClick);\n      return li;\n    }\n  }, {\n    key: 'next',\n    get: function get() {\n      var nextIndex = void 0;\n      if (this.index === this.siblings.length - 1) {\n        if (!this.dropdown.rotate) {\n          return null;\n        }\n        nextIndex = 0;\n      } else {\n        nextIndex = this.index + 1;\n      }\n      return this.siblings[nextIndex];\n    }\n\n    /**\n     * Get the previous sibling.\n     */\n\n  }, {\n    key: 'prev',\n    get: function get() {\n      var nextIndex = void 0;\n      if (this.index === 0) {\n        if (!this.dropdown.rotate) {\n          return null;\n        }\n        nextIndex = this.siblings.length - 1;\n      } else {\n        nextIndex = this.index - 1;\n      }\n      return this.siblings[nextIndex];\n    }\n  }]);\n\n  return DropdownItem;\n}();\n\nexports.default = DropdownItem;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nvar _textcomplete = __webpack_require__(7);\n\nvar _textcomplete2 = _interopRequireDefault(_textcomplete);\n\nvar _textarea = __webpack_require__(6);\n\nvar _textarea2 = _interopRequireDefault(_textarea);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar editors = void 0;\nif (global.Textcomplete && global.Textcomplete.editors) {\n  editors = global.Textcomplete.editors;\n} else {\n  editors = {};\n}\neditors.Textarea = _textarea2.default;\n\nglobal.Textcomplete = _textcomplete2.default;\nglobal.Textcomplete.editors = editors;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(8)))\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _search_result = __webpack_require__(0);\n\nvar _search_result2 = _interopRequireDefault(_search_result);\n\nvar _strategy = __webpack_require__(1);\n\nvar _strategy2 = _interopRequireDefault(_strategy);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Encapsulate matching condition between a Strategy and current editor's value.\n */\nvar Query = function () {\n  function Query(strategy, term, match) {\n    _classCallCheck(this, Query);\n\n    this.strategy = strategy;\n    this.term = term;\n    this.match = match;\n  }\n\n  /**\n   * Invoke search strategy and callback the given function.\n   */\n\n\n  _createClass(Query, [{\n    key: 'execute',\n    value: function execute(callback) {\n      var _this = this;\n\n      this.strategy.search(this.term, function (results) {\n        callback(results.map(function (result) {\n          return new _search_result2.default(result, _this.term, _this.strategy);\n        }));\n      }, this.match);\n    }\n  }]);\n\n  return Query;\n}();\n\nexports.default = Query;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\n/* jshint browser: true */\n\n(function () {\n\n// The properties that we copy into a mirrored div.\n// Note that some browsers, such as Firefox,\n// do not concatenate properties, i.e. padding-top, bottom etc. -> padding,\n// so we have to do every single property specifically.\nvar properties = [\n  'direction',  // RTL support\n  'boxSizing',\n  'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n  'height',\n  'overflowX',\n  'overflowY',  // copy the scrollbar for IE\n\n  'borderTopWidth',\n  'borderRightWidth',\n  'borderBottomWidth',\n  'borderLeftWidth',\n  'borderStyle',\n\n  'paddingTop',\n  'paddingRight',\n  'paddingBottom',\n  'paddingLeft',\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n  'fontStyle',\n  'fontVariant',\n  'fontWeight',\n  'fontStretch',\n  'fontSize',\n  'fontSizeAdjust',\n  'lineHeight',\n  'fontFamily',\n\n  'textAlign',\n  'textTransform',\n  'textIndent',\n  'textDecoration',  // might not make a difference, but better be safe\n\n  'letterSpacing',\n  'wordSpacing',\n\n  'tabSize',\n  'MozTabSize'\n\n];\n\nvar isBrowser = (typeof window !== 'undefined');\nvar isFirefox = (isBrowser && window.mozInnerScreenX != null);\n\nfunction getCaretCoordinates(element, position, options) {\n  if(!isBrowser) {\n    throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\n  }\n\n  var debug = options && options.debug || false;\n  if (debug) {\n    var el = document.querySelector('#input-textarea-caret-position-mirror-div');\n    if ( el ) { el.parentNode.removeChild(el); }\n  }\n\n  // mirrored div\n  var div = document.createElement('div');\n  div.id = 'input-textarea-caret-position-mirror-div';\n  document.body.appendChild(div);\n\n  var style = div.style;\n  var computed = window.getComputedStyle? getComputedStyle(element) : element.currentStyle;  // currentStyle for IE < 9\n\n  // default textarea styles\n  style.whiteSpace = 'pre-wrap';\n  if (element.nodeName !== 'INPUT')\n    style.wordWrap = 'break-word';  // only for textarea-s\n\n  // position off-screen\n  style.position = 'absolute';  // required to return coordinates properly\n  if (!debug)\n    style.visibility = 'hidden';  // not 'display: none' because we want rendering\n\n  // transfer the element's properties to the div\n  properties.forEach(function (prop) {\n    style[prop] = computed[prop];\n  });\n\n  if (isFirefox) {\n    // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n    if (element.scrollHeight > parseInt(computed.height))\n      style.overflowY = 'scroll';\n  } else {\n    style.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n  }\n\n  div.textContent = element.value.substring(0, position);\n  // the second special handling for input type=\"text\" vs textarea: spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n  if (element.nodeName === 'INPUT')\n    div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n\n  var span = document.createElement('span');\n  // Wrapping must be replicated *exactly*, including when a long word gets\n  // onto the next line, with whitespace at the end of the line before (#7).\n  // The  *only* reliable way to do that is to copy the *entire* rest of the\n  // textarea's content into the <span> created at the caret position.\n  // for inputs, just '.' would be enough, but why bother?\n  span.textContent = element.value.substring(position) || '.';  // || because a completely empty faux span doesn't render at all\n  div.appendChild(span);\n\n  var coordinates = {\n    top: span.offsetTop + parseInt(computed['borderTopWidth']),\n    left: span.offsetLeft + parseInt(computed['borderLeftWidth'])\n  };\n\n  if (debug) {\n    span.style.backgroundColor = '#aaa';\n  } else {\n    document.body.removeChild(div);\n  }\n\n  return coordinates;\n}\n\nif (typeof module != 'undefined' && typeof module.exports != 'undefined') {\n  module.exports = getCaretCoordinates;\n} else if(isBrowser){\n  window.getCaretCoordinates = getCaretCoordinates;\n}\n\n}());\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (el, headToCursor, cursorToTail) {\n  var curr = el.value,\n      // strA + strB1 + strC\n  next = headToCursor + (cursorToTail || ''),\n      // strA + strB2 + strC\n  activeElement = document.activeElement;\n\n  //  Calculate length of strA and strC\n  var aLength = 0,\n      cLength = 0;\n  while (curr[aLength] === next[aLength]) {\n    aLength++;\n  }\n  while (curr[curr.length - cLength - 1] === next[next.length - cLength - 1]) {\n    cLength++;\n  }\n  aLength = Math.min(aLength, Math.min(curr.length, next.length) - cLength);\n\n  // Select strB1\n  el.setSelectionRange(aLength, curr.length - cLength);\n\n  // Get strB2\n  var strB2 = next.substring(aLength, next.length - cLength);\n\n  // Replace strB1 with strB2\n  el.focus();\n  if (!document.execCommand('insertText', false, strB2)) {\n    // Document.execCommand returns false if the command is not supported.\n    // Firefox and IE returns false in this case.\n    el.value = next;\n    el.dispatchEvent(createInputEvent());\n  }\n\n  // Move cursor to the end of headToCursor\n  el.setSelectionRange(headToCursor.length, headToCursor.length);\n\n  activeElement && activeElement.focus();\n  return el;\n};\n\nfunction createInputEvent() {\n  if (typeof Event !== \"undefined\") {\n    return new Event(\"input\", { bubbles: true, cancelable: true });\n  } else {\n    var event = document.createEvent(\"Event\");\n    event.initEvent(\"input\", true, true);\n    return event;\n  }\n}\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// textcomplete.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e9fe0aaf59e71a1e53a3","// @flow\n\nimport Strategy from './strategy';\n\n/**\n * Encapsulate an result of each search results.\n */\nexport default class SearchResult {\n  data: Object;\n  term: string;\n  strategy: Strategy;\n\n  /**\n   * @param {object} data - An element of array callbacked by search function.\n   */\n  constructor(data: Object, term: string, strategy: Strategy) {\n    this.data = data;\n    this.term = term;\n    this.strategy = strategy;\n  }\n\n  replace(beforeCursor: string, afterCursor: string) {\n    let replacement = this.strategy.replace(this.data);\n    if (replacement !== null) {\n      if (Array.isArray(replacement)) {\n        afterCursor = replacement[1] + afterCursor;\n        replacement = replacement[0];\n      }\n      const match = this.strategy.matchText(beforeCursor);\n      if (match) {\n        replacement = replacement\n          .replace(/\\$&/g, match[0])\n          .replace(/\\$(\\d+)/g, (_, p1) => match[parseInt(p1, 10)]);\n        return [\n          [\n            beforeCursor.slice(0, match.index),\n            replacement,\n            beforeCursor.slice(match.index + match[0].length),\n          ].join(''),\n          afterCursor,\n        ];\n      }\n    }\n  }\n\n  render(): string {\n    return this.strategy.template(this.data, this.term);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/search_result.js","// @flow\n\nimport Query from './query';\nimport type {MatchData} from './query';\n\nconst DEFAULT_INDEX = 2;\n\nfunction DEFAULT_TEMPLATE(value) {\n  return value;\n}\n\n/**\n * Properties for a strategy.\n *\n * @typedef\n */\nexport type StrategyProperties = {\n  match: RegExp | (string) => MatchData | null;\n  search: Function;\n  replace: (any) => string[] | string | null;\n  cache?: boolean;\n  context?: Function;\n  template?: (any) => string;\n  index?: number;\n  id?: string;\n}\n\n/**\n * Encapsulate a single strategy.\n */\nexport default class Strategy {\n  props: StrategyProperties;\n  cache: ?Object;\n\n  constructor(props: StrategyProperties) {\n    this.props = props;\n    this.cache = props.cache ? {} : null;\n  }\n\n  /**\n   * @return {this}\n   */\n  destroy() {\n    this.cache = null;\n    return this;\n  }\n\n  /**\n   * Build a Query object by the given string if this matches to the string.\n   *\n   * @param {string} text - Head to input cursor.\n   */\n  buildQuery(text: string): ?Query {\n    if (typeof this.props.context === 'function') {\n      const context = this.props.context(text);\n      if (typeof context === 'string') {\n        text = context;\n      } else if (!context) {\n        return null;\n      }\n    }\n    const match = this.matchText(text);\n    return match ? new Query(this, match[this.index], match) : null;\n  }\n\n  search(term: string, callback: Function, match: MatchData): void {\n    if (this.cache) {\n      this.searchWithCache(term, callback, match);\n    } else {\n      this.props.search(term, callback, match);\n    }\n  }\n\n  /**\n   * @param {object} data - An element of array callbacked by search function.\n   */\n  replace(data: any) {\n    return this.props.replace(data);\n  }\n\n  /** @private */\n  searchWithCache(term: string, callback: Function, match: MatchData): void {\n    if (this.cache && this.cache[term]) {\n      callback(this.cache[term]);\n    } else {\n      this.props.search(term, results => {\n        if (this.cache) {\n          this.cache[term] = results;\n        }\n        callback(results);\n      }, match);\n    }\n  }\n\n  /** @private */\n  matchText(text: string): MatchData | null {\n    if (typeof this.match === 'function') {\n      return this.match(text);\n    } else {\n      return (text.match(this.match): any);\n    }\n  }\n\n  /** @private */\n  get match(): $PropertyType<StrategyProperties, 'match'> {\n    return this.props.match;\n  }\n\n  /** @private */\n  get index(): number {\n    return typeof this.props.index === 'number' ? this.props.index : DEFAULT_INDEX;\n  }\n\n  get template(): (...any) => string {\n    return this.props.template || DEFAULT_TEMPLATE;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/strategy.js","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @api private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {Mixed} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Boolean} exists Only check if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {Mixed} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n         listeners.fn === fn\n      && (!once || listeners.once)\n      && (!context || listeners.context === context)\n    ) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n           listeners[i].fn !== fn\n        || (once && !listeners[i].once)\n        || (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {String|Symbol} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/eventemitter3/index.js\n// module id = 2\n// module chunks = 0","// @flow\n\n/**\n * Create a custom event\n *\n * @private\n */\nexport const createCustomEvent = (() => {\n  if (typeof window.CustomEvent === 'function') {\n    return function (type: string, options: ?{ detail?: Object; cancelable?: boolean; }): CustomEvent {\n      return new document.defaultView.CustomEvent(type, {\n        cancelable: options && options.cancelable || false,\n        detail: options && options.detail || undefined,\n      });\n    };\n  } else {\n    // Custom event polyfill from\n    // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#polyfill\n    return function (type: string, options: ?{ detail?: Object; cancelable?: boolean; }): CustomEvent {\n      const event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type,\n        /* bubbles */ false,\n        options && options.cancelable || false,\n        options && options.detail || undefined);\n      return event;\n    };\n  }\n})();\n\n/**\n * Get the current coordinates of the `el` relative to the document.\n *\n * @private\n */\nexport function calculateElementOffset(el: HTMLElement): { top: number; left: number; } {\n  const rect = el.getBoundingClientRect();\n  const {defaultView, documentElement} = el.ownerDocument;\n  const offset = { top: rect.top + defaultView.pageYOffset, left: rect.left + defaultView.pageXOffset };\n  if (documentElement) {\n    offset.top -= documentElement.clientTop;\n    offset.left -= documentElement.clientLeft;\n  }\n  return offset;\n}\n\nconst CHAR_CODE_ZERO = '0'.charCodeAt(0);\nconst CHAR_CODE_NINE = '9'.charCodeAt(0);\n\nfunction isDigit(charCode: number): boolean {\n  return charCode >= CHAR_CODE_ZERO && charCode <= CHAR_CODE_NINE;\n}\n\n/**\n * Returns the line-height of the given node in pixels.\n *\n * @private\n */\nexport function getLineHeightPx(node: HTMLElement): number {\n  const computedStyle = window.getComputedStyle(node);\n\n  // If the char code starts with a digit, it is either a value in pixels,\n  // or unitless, as per:\n  // https://drafts.csswg.org/css2/visudet.html#propdef-line-height\n  // https://drafts.csswg.org/css2/cascade.html#computed-value\n  if (isDigit(computedStyle.lineHeight.charCodeAt(0))) {\n    // In real browsers the value is *always* in pixels, even for unit-less\n    // line-heights. However, we still check as per the spec.\n    if (isDigit(computedStyle.lineHeight.charCodeAt(computedStyle.lineHeight.length - 1))) {\n      return parseFloat(computedStyle.lineHeight) * parseFloat(computedStyle.fontSize);\n    } else {\n      return parseFloat(computedStyle.lineHeight);\n    }\n  }\n\n  // Otherwise, the value is \"normal\".\n  // If the line-height is \"normal\", calculate by font-size\n  const body = document.body;\n  if (!body) {\n    return 0;\n  }\n  const tempNode = document.createElement(node.nodeName);\n  tempNode.innerHTML = '&nbsp;';\n  tempNode.style.fontSize = computedStyle.fontSize;\n  tempNode.style.fontFamily = computedStyle.fontFamily;\n  body.appendChild(tempNode);\n  // Assume the height of the element is the line-height\n  const height = tempNode.offsetHeight;\n  body.removeChild(tempNode);\n  return height;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","// @flow\nimport EventEmitter from 'eventemitter3';\n\nimport DropdownItem from './dropdown_item';\nimport SearchResult from './search_result';\nimport {createCustomEvent} from './utils';\nimport type {CursorOffset} from './editor';\n\nconst DEFAULT_CLASS_NAME = 'dropdown-menu textcomplete-dropdown';\n\n/** @typedef */\nexport type DropdownOptions = {\n  className?: string;\n  footer?: (any) => string | string;\n  header?: (any) => string | string;\n  maxCount?: number;\n  placement?: string;\n  rotate?: boolean;\n  style?: { [string]: string; };\n};\n\n/**\n * Encapsulate a dropdown view.\n *\n * @prop {boolean} shown - Whether the #el is shown or not.\n * @prop {DropdownItem[]} items - The array of rendered dropdown items.\n */\nexport default class Dropdown extends EventEmitter {\n  shown: boolean;\n  items: DropdownItem[];\n  footer: $PropertyType<DropdownOptions, 'footer'>;\n  header: $PropertyType<DropdownOptions, 'header'>;\n  maxCount: $PropertyType<DropdownOptions, 'maxCount'>;\n  rotate: $PropertyType<DropdownOptions, 'rotate'>;\n  placement: $PropertyType<DropdownOptions, 'placement'>;\n  _el: ?HTMLUListElement;\n\n  static createElement(): HTMLUListElement {\n    const el = document.createElement('ul');\n    const style = el.style;\n    style.display = 'none';\n    style.position = 'absolute';\n    style.zIndex = '10000';\n    const body = document.body;\n    if (body) {\n      body.appendChild(el);\n    }\n    return el;\n  }\n\n  constructor(options: DropdownOptions) {\n    super();\n    this.shown = false;\n    this.items = [];\n    this.footer = options.footer;\n    this.header = options.header;\n    this.maxCount = options.maxCount || 10;\n    this.el.className = options.className || DEFAULT_CLASS_NAME;\n    this.rotate = options.hasOwnProperty('rotate') ? options.rotate : true;\n    this.placement = options.placement;\n    const style = options.style;\n    if (style) {\n      Object.keys(style).forEach((key) => {\n        (this.el.style: any)[key] = style[key];\n      });\n    }\n  }\n\n  /**\n   * @return {this}\n   */\n  destroy() {\n    const parentNode = this.el.parentNode;\n    if (parentNode) {\n      parentNode.removeChild(this.el);\n    }\n    this.clear()._el = null;\n    return this;\n  }\n\n  get el(): HTMLUListElement {\n    if (!this._el) {\n      this._el = Dropdown.createElement();\n    }\n    return this._el;\n  }\n\n  /**\n   * Render the given data as dropdown items.\n   *\n   * @return {this}\n   */\n  render(searchResults: SearchResult[], cursorOffset: CursorOffset) {\n    const renderEvent = createCustomEvent('render', { cancelable: true });\n    this.emit('render', renderEvent);\n    if (renderEvent.defaultPrevented) {\n      return this;\n    }\n    const rawResults = searchResults.map(searchResult => searchResult.data);\n    const dropdownItems = searchResults\n      .slice(0, this.maxCount || searchResults.length)\n      .map(searchResult => new DropdownItem(searchResult));\n    this.clear()\n        .setStrategyId(searchResults[0])\n        .renderEdge(rawResults, 'header')\n        .append(dropdownItems)\n        .renderEdge(rawResults, 'footer')\n        .setOffset(cursorOffset)\n        .show();\n    this.emit('rendered', createCustomEvent('rendered'));\n    return this;\n  }\n\n  /**\n   * Hide the dropdown then sweep out items.\n   *\n   * @return {this}\n   */\n  deactivate() {\n    return this.hide().clear();\n  }\n\n  /**\n   * @return {this}\n   */\n  select(dropdownItem: DropdownItem) {\n    const detail = { searchResult: dropdownItem.searchResult };\n    const selectEvent = createCustomEvent('select', { cancelable: true, detail: detail });\n    this.emit('select', selectEvent);\n    if (selectEvent.defaultPrevented) {\n      return this;\n    }\n    this.deactivate();\n    this.emit('selected', createCustomEvent('selected', {detail}));\n    return this;\n  }\n\n  /**\n   * @return {this}\n   */\n  up(e: CustomEvent) {\n    return this.shown ? this.moveActiveItem('prev', e) : this;\n  }\n\n  /**\n   * @return {this}\n   */\n  down(e: CustomEvent) {\n    return this.shown ? this.moveActiveItem('next', e) : this;\n  }\n\n  /**\n   * Retrieve the active item.\n   */\n  getActiveItem(): ?DropdownItem {\n    return this.items.find(item => item.active);\n  }\n\n  /**\n   * Add items to dropdown.\n   *\n   * @private\n   */\n  append(items: DropdownItem[]) {\n    const fragment = document.createDocumentFragment();\n    items.forEach(item => {\n      this.items.push(item);\n      item.appended(this);\n      fragment.appendChild(item.el);\n    });\n    this.el.appendChild(fragment);\n    return this;\n  }\n\n  /** @private */\n  setOffset(cursorOffset: CursorOffset) {\n    if (cursorOffset.left) {\n      this.el.style.left = `${cursorOffset.left}px`;\n    } else if (cursorOffset.right) {\n      this.el.style.right = `${cursorOffset.right}px`;\n    }\n\n    const element = document.documentElement;\n    let forceTop = false;\n    \n    if(this.isPlacementAuto()) {\n      let dropdownHeight = this.items.length * cursorOffset.lineHeight;\n\n      if(cursorOffset.clientTop + dropdownHeight > element.clientHeight) {\n        forceTop = true;\n      }\n    }\n\n    if (this.isPlacementTop() || forceTop) {\n      if (element) {\n        this.el.style.bottom = `${element.clientHeight - cursorOffset.top + cursorOffset.lineHeight}px`;\n        this.el.style.top = 'auto';\n      }\n    } else {\n      this.el.style.top = `${cursorOffset.top}px`;\n      this.el.style.bottom = 'auto';\n    }\n    return this;\n  }\n\n  /**\n   * Show the element.\n   *\n   * @private\n   */\n  show() {\n    if (!this.shown) {\n      const showEvent = createCustomEvent('show', { cancelable: true });\n      this.emit('show', showEvent);\n      if (showEvent.defaultPrevented) {\n        return this;\n      }\n      this.el.style.display = 'block';\n      this.shown = true;\n      this.emit('shown', createCustomEvent('shown'));\n    }\n    return this;\n  }\n\n  /**\n   * Hide the element.\n   *\n   * @private\n   */\n  hide() {\n    if (this.shown) {\n      const hideEvent = createCustomEvent('hide', { cancelable: true });\n      this.emit('hide', hideEvent);\n      if (hideEvent.defaultPrevented) {\n        return this;\n      }\n      this.el.style.display = 'none';\n      this.shown = false;\n      this.emit('hidden', createCustomEvent('hidden'));\n    }\n    return this;\n  }\n\n  /**\n   * Clear search results.\n   *\n   * @private\n   */\n  clear() {\n    this.el.innerHTML = '';\n    this.items.forEach(item => item.destroy());\n    this.items = [];\n    return this;\n  }\n\n  /** @private */\n  moveActiveItem(name: 'next' | 'prev', e: CustomEvent) {\n    const activeItem: any = this.getActiveItem();\n    let nextActiveItem;\n    if (activeItem) {\n      nextActiveItem = activeItem[name];\n    } else {\n      nextActiveItem = name === 'next' ? this.items[0] : this.items[this.items.length - 1];\n    }\n    if (nextActiveItem) {\n      nextActiveItem.activate();\n      e.preventDefault();\n    }\n    return this;\n  }\n\n  /** @private */\n  setStrategyId(searchResult: ?SearchResult) {\n    const strategyId = searchResult && searchResult.strategy.props.id;\n    if (strategyId) {\n      this.el.setAttribute('data-strategy', strategyId);\n    } else {\n      this.el.removeAttribute('data-strategy');\n    }\n    return this;\n  }\n\n  /**\n   * @private\n   * @param {object[]} rawResults - What callbacked by search function.\n   */\n  renderEdge(rawResults: Object[], type: 'header' | 'footer') {\n    const source = (type === 'header' ? this.header : this.footer) || '';\n    const content: any = typeof source === 'function' ? source(rawResults) : source;\n    const li = document.createElement('li');\n    li.classList.add(`textcomplete-${type}`);\n    li.innerHTML = content;\n    this.el.appendChild(li);\n    return this;\n  }\n\n  /** @private */\n  isPlacementTop() {\n    return this.placement === 'top';\n  }\n\n  isPlacementAuto() {\n    return this.placement === 'auto';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/dropdown.js","// @flow\n\nimport EventEmitter from 'eventemitter3';\n\nimport {createCustomEvent} from './utils';\nimport SearchResult from './search_result';\n\n/** @typedef */\nexport type CursorOffset = {\n  lineHeight: number;\n  top: number;\n  left?: number;\n  right?: number;\n};\n\ntype KeyCode = 'ESC' | 'ENTER' | 'UP' | 'DOWN' | 'OTHER' | 'BS' | 'META';\n\n/**\n * Abstract class representing a editor target.\n *\n * Editor classes must implement `#applySearchResult`, `#getCursorOffset`,\n * `#getBeforeCursor` and `#getAfterCursor` methods.\n *\n * @abstract\n */\nexport default class Editor extends EventEmitter {\n  /**\n   * It is called when associated textcomplete object is destroyed.\n   *\n   * @return {this}\n   */\n  destroy() {\n    return this;\n  }\n\n  /**\n   * It is called when a search result is selected by a user.\n   */\n  applySearchResult(_: SearchResult): void {\n    throw new Error('Not implemented.');\n  }\n\n  /**\n   * The input cursor's absolute coordinates from the window's left\n   * top corner.\n   */\n  getCursorOffset(): CursorOffset {\n    throw new Error('Not implemented.');\n  }\n\n  /**\n   * Editor string value from head to cursor.\n   */\n  getBeforeCursor(): string {\n    throw new Error('Not implemented.');\n  }\n\n  /**\n   * Editor string value from cursor to tail.\n   */\n  getAfterCursor(): string {\n    throw new Error('Not implemented.');\n  }\n\n  /** @private */\n  emitMoveEvent(code: 'UP' | 'DOWN'): CustomEvent {\n    const moveEvent = createCustomEvent('move', {\n      cancelable: true,\n      detail: {\n        code: code,\n      },\n    });\n    this.emit('move', moveEvent);\n    return moveEvent;\n  }\n\n  /** @private */\n  emitEnterEvent(): CustomEvent {\n    const enterEvent = createCustomEvent('enter', { cancelable: true });\n    this.emit('enter', enterEvent);\n    return enterEvent;\n  }\n\n  /** @private */\n  emitChangeEvent(): CustomEvent {\n    const changeEvent = createCustomEvent('change', {\n      detail: {\n        beforeCursor: this.getBeforeCursor(),\n      },\n    });\n    this.emit('change', changeEvent);\n    return changeEvent;\n  }\n\n  /** @private */\n  emitEscEvent(): CustomEvent {\n    const escEvent = createCustomEvent('esc', { cancelable: true });\n    this.emit('esc', escEvent);\n    return escEvent;\n  }\n\n  /** @private */\n  getCode(e: KeyboardEvent): KeyCode {\n    return e.keyCode === 8 ? 'BS' // backspace\n         : e.keyCode === 9 ? 'ENTER' // tab\n         : e.keyCode === 13 ? 'ENTER' // enter\n         : e.keyCode === 16 ? 'META' // shift\n         : e.keyCode === 17 ? 'META' // ctrl\n         : e.keyCode === 18 ? 'META' // alt\n         : e.keyCode === 27 ? 'ESC' // esc\n         : e.keyCode === 38 ? 'UP' // up\n         : e.keyCode === 40 ? 'DOWN' // down\n         : e.keyCode === 78 && e.ctrlKey ? 'DOWN' // ctrl-n\n         : e.keyCode === 80 && e.ctrlKey ? 'UP' // ctrl-p\n         : e.keyCode === 91 ? 'META' // left command\n         : e.keyCode === 93 ? 'META' // right command\n         : 'OTHER';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor.js","// @flow\n\nimport update from 'undate/lib/update';\n\nimport Editor from './editor';\nimport {calculateElementOffset, getLineHeightPx} from './utils';\nimport SearchResult from './search_result';\n\nconst getCaretCoordinates = require('textarea-caret');\n\nconst CALLBACK_METHODS = ['onInput', 'onKeydown'];\n\n/**\n * Encapsulate the target textarea element.\n */\nexport default class Textarea extends Editor {\n  el: HTMLTextAreaElement;\n\n  /**\n   * @param {HTMLTextAreaElement} el - Where the textcomplete works on.\n   */\n  constructor(el: HTMLTextAreaElement) {\n    super();\n    this.el = el;\n\n    CALLBACK_METHODS.forEach((method) => {\n      (this: any)[method] = (this: any)[method].bind(this);\n    });\n\n    this.startListening();\n  }\n\n  /**\n   * @return {this}\n   */\n  destroy() {\n    super.destroy();\n    this.stopListening();\n    // Release the element reference early to help garbage collection.\n    (this: any).el = null;\n    return this;\n  }\n\n  /**\n   * Implementation for {@link Editor#applySearchResult}\n   */\n  applySearchResult(searchResult: SearchResult) {\n    const replace = searchResult.replace(this.getBeforeCursor(), this.getAfterCursor());\n    if (this.getBeforeCursor() !== replace[0]) {\n      this.el.focus(); // Clicking a dropdown item removes focus from the element.\n      if (Array.isArray(replace)) {\n        update(this.el, replace[0], replace[1]);\n        this.el.dispatchEvent(new Event('input'));\n      }\n    }\n  }\n\n  /**\n   * Implementation for {@link Editor#getCursorOffset}\n   */\n  getCursorOffset() {\n    const elOffset = calculateElementOffset(this.el);\n    const elScroll = this.getElScroll();\n    const cursorPosition = this.getCursorPosition();\n    const lineHeight = getLineHeightPx(this.el);\n    const top = elOffset.top - elScroll.top + cursorPosition.top + lineHeight;\n    const left = elOffset.left - elScroll.left + cursorPosition.left;\n    const clientTop = this.el.getBoundingClientRect().top;\n    if (this.el.dir !== 'rtl') {\n      return { top, left, lineHeight, clientTop };\n    } else {\n      const right = document.documentElement ? document.documentElement.clientWidth - left : 0;\n      return { top, right, lineHeight, clientTop };\n    }\n  }\n\n  /**\n   * Implementation for {@link Editor#getBeforeCursor}\n   */\n  getBeforeCursor() {\n    return this.el.value.substring(0, this.el.selectionEnd);\n  }\n\n  /**\n   * Implementation for {@link Editor#getAfterCursor}\n   */\n  getAfterCursor() {\n    return this.el.value.substring(this.el.selectionEnd);\n  }\n\n  /** @private */\n  getElScroll(): { top: number; left: number; } {\n    return { top: this.el.scrollTop, left: this.el.scrollLeft };\n  }\n\n  /**\n   * The input cursor's relative coordinates from the textarea's left\n   * top corner.\n   *\n   * @private\n   */\n  getCursorPosition(): { top: number; left: number; } {\n    return getCaretCoordinates(this.el, this.el.selectionEnd);\n  }\n\n  /** @private */\n  onInput(_: Event) {\n    this.emitChangeEvent();\n  }\n\n  /** @private */\n  onKeydown(e: KeyboardEvent) {\n    const code = this.getCode(e);\n    let event;\n    if (code === 'UP' || code === 'DOWN') {\n      event = this.emitMoveEvent(code);\n    } else if (code === 'ENTER') {\n      event = this.emitEnterEvent();\n    } else if (code === 'ESC') {\n      event = this.emitEscEvent();\n    }\n    if (event && event.defaultPrevented) {\n      e.preventDefault();\n    }\n  }\n\n  /** @private */\n  startListening() {\n    this.el.addEventListener('input', this.onInput);\n    this.el.addEventListener('keydown', this.onKeydown);\n  }\n\n  /** @private */\n  stopListening() {\n    this.el.removeEventListener('input', this.onInput);\n    this.el.removeEventListener('keydown', this.onKeydown);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/textarea.js","// @flow\n\nimport Completer from './completer';\nimport Editor from './editor';\nimport Dropdown, {type DropdownOptions} from './dropdown';\nimport Strategy, {type StrategyProperties} from './strategy';\nimport SearchResult from './search_result';\n\nimport EventEmitter from 'eventemitter3';\n\nconst CALLBACK_METHODS = [\n  'handleChange',\n  'handleEnter',\n  'handleEsc',\n  'handleHit',\n  'handleMove',\n  'handleSelect',\n];\n\n/** @typedef */\ntype TextcompleteOptions = {\n  dropdown?: DropdownOptions;\n};\n\n/**\n * The core of textcomplete. It acts as a mediator.\n */\nexport default class Textcomplete extends EventEmitter {\n  dropdown: Dropdown;\n  editor: Editor;\n  options: TextcompleteOptions;\n  completer: Completer;\n  isQueryInFlight: boolean;\n  nextPendingQuery: string | null;\n\n  /**\n   * @param {Editor} editor - Where the textcomplete works on.\n   */\n  constructor(editor: Editor, options: TextcompleteOptions = {}) {\n    super();\n\n    this.completer = new Completer();\n    this.isQueryInFlight = false;\n    this.nextPendingQuery = null;\n    this.dropdown = new Dropdown(options.dropdown || {});\n    this.editor = editor;\n    this.options = options;\n\n    CALLBACK_METHODS.forEach((method) => {\n      (this: any)[method] = (this: any)[method].bind(this);\n    });\n\n    this.startListening();\n  }\n\n  /**\n   * @return {this}\n   */\n  destroy(destroyEditor: boolean = true) {\n    this.completer.destroy();\n    this.dropdown.destroy();\n    if (destroyEditor) {\n      this.editor.destroy();\n    }\n    this.stopListening();\n    return this;\n  }\n\n  /**\n   * @return {this}\n   * @example\n   * textcomplete.register([{\n   *   match: /(^|\\s)(\\w+)$/,\n   *   search: function (term, callback) {\n   *     $.ajax({ ... })\n   *       .done(callback)\n   *       .fail([]);\n   *   },\n   *   replace: function (value) {\n   *     return '$1' + value + ' ';\n   *   }\n   * }]);\n   */\n  register(strategyPropsArray: StrategyProperties[]) {\n    strategyPropsArray.forEach(props => {\n      this.completer.registerStrategy(new Strategy(props));\n    });\n    return this;\n  }\n\n  /**\n   * Start autocompleting.\n   *\n   * @param {string} text - Head to input cursor.\n   * @return {this}\n   */\n  trigger(text: string) {\n    if (this.isQueryInFlight) {\n      this.nextPendingQuery = text;\n    } else {\n      this.isQueryInFlight = true;\n      this.nextPendingQuery = null;\n      this.completer.run(text);\n    }\n    return this;\n  }\n\n  /** @private */\n  handleHit({ searchResults }: { searchResults: SearchResult[]; }) {\n    if (searchResults.length) {\n      this.dropdown.render(searchResults, this.editor.getCursorOffset());\n    } else {\n      this.dropdown.deactivate();\n    }\n    this.isQueryInFlight = false;\n    if (this.nextPendingQuery !== null) {\n      this.trigger(this.nextPendingQuery);\n    }\n  }\n\n  /** @private */\n  handleMove(e: CustomEvent) {\n    e.detail.code === 'UP' ? this.dropdown.up(e) : this.dropdown.down(e);\n  }\n\n  /** @private */\n  handleEnter(e: CustomEvent) {\n    const activeItem = this.dropdown.getActiveItem();\n    if (activeItem) {\n      this.dropdown.select(activeItem);\n      e.preventDefault();\n    }\n  }\n\n  /** @private */\n  handleEsc(e: CustomEvent) {\n    if (this.dropdown.shown) {\n      this.dropdown.deactivate();\n      e.preventDefault();\n    }\n  }\n\n  /** @private */\n  handleChange(e: CustomEvent) {\n    this.trigger(e.detail.beforeCursor);\n  }\n\n  /** @private */\n  handleSelect(selectEvent: CustomEvent) {\n    this.emit('select', selectEvent);\n    if (!selectEvent.defaultPrevented) {\n      this.editor.applySearchResult(selectEvent.detail.searchResult);\n    }\n  }\n\n  /** @private */\n  startListening() {\n    this.editor.on('move', this.handleMove)\n               .on('enter', this.handleEnter)\n               .on('esc', this.handleEsc)\n               .on('change', this.handleChange);\n    this.dropdown.on('select', this.handleSelect);\n    ['show', 'shown', 'render', 'rendered', 'selected', 'hidden', 'hide']\n      .forEach(eventName => {\n        this.dropdown.on(eventName, () => this.emit(eventName));\n      });\n    this.completer.on('hit', this.handleHit);\n  }\n\n  /** @private */\n  stopListening() {\n    this.completer.removeAllListeners();\n    this.dropdown.removeAllListeners();\n    this.editor.removeListener('move', this.handleMove)\n               .removeListener('enter', this.handleEnter)\n               .removeListener('esc', this.handleEsc)\n               .removeListener('change', this.handleChange);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/textcomplete.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 8\n// module chunks = 0","// @flow\n\nimport EventEmitter from 'eventemitter3';\n\nimport Strategy from './strategy';\nimport SearchResult from './search_result';\n\nconst CALLBACK_METHODS = ['handleQueryResult'];\n\n/**\n * Complete engine.\n */\nexport default class Completer extends EventEmitter {\n  strategies: Strategy[];\n\n  constructor() {\n    super();\n    this.strategies = [];\n\n    CALLBACK_METHODS.forEach((method) => {\n      (this: any)[method] = (this: any)[method].bind(this);\n    });\n  }\n\n  /**\n   * @return {this}\n   */\n  destroy() {\n    this.strategies.forEach(strategy => strategy.destroy());\n    return this;\n  }\n\n  /**\n   * Register a strategy to the completer.\n   *\n   * @return {this}\n   */\n  registerStrategy(strategy: Strategy) {\n    this.strategies.push(strategy);\n    return this;\n  }\n\n  /**\n   * @param {string} text - Head to input cursor.\n   */\n  run(text: string): void {\n    const query = this.extractQuery(text);\n    if (query) {\n      query.execute(this.handleQueryResult);\n    } else {\n      this.handleQueryResult([]);\n    }\n  }\n\n  /**\n   * Find a query, which matches to the given text.\n   *\n   * @private\n   */\n  extractQuery(text: string) {\n    for (let i = 0; i < this.strategies.length; i++) {\n      const query = this.strategies[i].buildQuery(text);\n      if (query) { return query; }\n    }\n    return null;\n  }\n\n  /**\n   * Callbacked by {@link Query#execute}.\n   *\n   * @private\n   */\n  handleQueryResult(searchResults: SearchResult[]) {\n    this.emit('hit', { searchResults });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/completer.js","// @flow\n\nimport Dropdown from './dropdown';\nimport SearchResult from './search_result';\n\nexport const CLASS_NAME = 'textcomplete-item';\nconst ACTIVE_CLASS_NAME = `${CLASS_NAME} active`;\nconst CALLBACK_METHODS = ['onClick', 'onMouseover'];\n\n/**\n * Encapsulate an item of dropdown.\n */\nexport default class DropdownItem {\n  searchResult: SearchResult;\n  active: boolean;\n  siblings: DropdownItem[];\n  dropdown: Dropdown;\n  index: number;\n  _el: ?HTMLLIElement;\n\n  constructor(searchResult: SearchResult) {\n    this.searchResult = searchResult;\n    this.active = false;\n\n    CALLBACK_METHODS.forEach((method) => {\n      (this: any)[method] = (this: any)[method].bind(this);\n    });\n  }\n\n  get el(): HTMLLIElement {\n    if (this._el) {\n      return this._el;\n    }\n    const li = document.createElement('li');\n    li.className = this.active ? ACTIVE_CLASS_NAME : CLASS_NAME;\n    const a = document.createElement('a');\n    a.innerHTML = this.searchResult.render();\n    li.appendChild(a);\n    this._el = li;\n    li.addEventListener('mousedown', this.onClick);\n    li.addEventListener('mouseover', this.onMouseover);\n    li.addEventListener('touchstart', this.onClick);\n    return li;\n  }\n\n  /**\n   * Try to free resources and perform other cleanup operations.\n   */\n  destroy() {\n    this.el.removeEventListener('mousedown', this.onClick, false);\n    this.el.removeEventListener('mouseover', this.onMouseover, false);\n    this.el.removeEventListener('touchstart', this.onClick, false);\n    // This element has already been removed by {@link Dropdown#clear}.\n    this._el = null;\n  }\n\n  /**\n   * Callbacked when it is appended to a dropdown.\n   *\n   * @see Dropdown#append\n   */\n  appended(dropdown: Dropdown) {\n    this.dropdown = dropdown;\n    this.siblings = dropdown.items;\n    this.index = this.siblings.length - 1;\n  }\n\n  /**\n   * Deactivate active item then activate itself.\n   *\n   * @return {this}\n   */\n  activate() {\n    if (!this.active) {\n      const activeItem = this.dropdown.getActiveItem();\n      if (activeItem) {\n        activeItem.deactivate();\n      }\n      this.active = true;\n      this.el.className = ACTIVE_CLASS_NAME;\n    }\n    return this;\n  }\n\n  /**\n   * Get the next sibling.\n   */\n  get next(): ?DropdownItem {\n    let nextIndex;\n    if (this.index === this.siblings.length - 1) {\n      if (!this.dropdown.rotate) {\n        return null;\n      }\n      nextIndex = 0;\n    } else {\n      nextIndex = this.index + 1;\n    }\n    return this.siblings[nextIndex];\n  }\n\n  /**\n   * Get the previous sibling.\n   */\n  get prev(): ?DropdownItem {\n    let nextIndex;\n    if (this.index === 0) {\n      if (!this.dropdown.rotate) {\n        return null;\n      }\n      nextIndex = this.siblings.length - 1;\n    } else {\n      nextIndex = this.index - 1;\n    }\n    return this.siblings[nextIndex];\n  }\n\n  /** @private */\n  deactivate() {\n    if (this.active) {\n      this.active = false;\n      this.el.className = CLASS_NAME;\n    }\n    return this;\n  }\n\n  /** @private */\n  onClick(e: Event) {\n    e.preventDefault(); // Prevent blur event\n    this.dropdown.select(this);\n  }\n\n  /** @private */\n  onMouseover(_: MouseEvent) {\n    this.activate();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/dropdown_item.js","import Textcomplete from './textcomplete';\nimport Textarea from './textarea';\n\nlet editors;\nif (global.Textcomplete && global.Textcomplete.editors) {\n  editors = global.Textcomplete.editors;\n} else {\n  editors = {};\n}\neditors.Textarea = Textarea;\n\nglobal.Textcomplete = Textcomplete;\nglobal.Textcomplete.editors = editors;\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","// @flow\n\nimport SearchResult from './search_result';\nimport Strategy from './strategy';\n\ndeclare class MatchData extends Array<string> {\n  index: number;\n}\n\nexport type { MatchData };\n\n/**\n * Encapsulate matching condition between a Strategy and current editor's value.\n */\nexport default class Query {\n  strategy: Strategy;\n  term: string;\n  match: MatchData;\n\n  constructor(strategy: Strategy, term: string, match: MatchData) {\n    this.strategy = strategy;\n    this.term = term;\n    this.match = match;\n  }\n\n  /**\n   * Invoke search strategy and callback the given function.\n   */\n  execute(callback: (SearchResult[]) => void) {\n    this.strategy.search(\n      this.term,\n      results => {\n        callback(results.map(result => {\n          return new SearchResult(result, this.term, this.strategy);\n        }));\n      },\n      this.match\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query.js","/* jshint browser: true */\n\n(function () {\n\n// The properties that we copy into a mirrored div.\n// Note that some browsers, such as Firefox,\n// do not concatenate properties, i.e. padding-top, bottom etc. -> padding,\n// so we have to do every single property specifically.\nvar properties = [\n  'direction',  // RTL support\n  'boxSizing',\n  'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n  'height',\n  'overflowX',\n  'overflowY',  // copy the scrollbar for IE\n\n  'borderTopWidth',\n  'borderRightWidth',\n  'borderBottomWidth',\n  'borderLeftWidth',\n  'borderStyle',\n\n  'paddingTop',\n  'paddingRight',\n  'paddingBottom',\n  'paddingLeft',\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n  'fontStyle',\n  'fontVariant',\n  'fontWeight',\n  'fontStretch',\n  'fontSize',\n  'fontSizeAdjust',\n  'lineHeight',\n  'fontFamily',\n\n  'textAlign',\n  'textTransform',\n  'textIndent',\n  'textDecoration',  // might not make a difference, but better be safe\n\n  'letterSpacing',\n  'wordSpacing',\n\n  'tabSize',\n  'MozTabSize'\n\n];\n\nvar isBrowser = (typeof window !== 'undefined');\nvar isFirefox = (isBrowser && window.mozInnerScreenX != null);\n\nfunction getCaretCoordinates(element, position, options) {\n  if(!isBrowser) {\n    throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\n  }\n\n  var debug = options && options.debug || false;\n  if (debug) {\n    var el = document.querySelector('#input-textarea-caret-position-mirror-div');\n    if ( el ) { el.parentNode.removeChild(el); }\n  }\n\n  // mirrored div\n  var div = document.createElement('div');\n  div.id = 'input-textarea-caret-position-mirror-div';\n  document.body.appendChild(div);\n\n  var style = div.style;\n  var computed = window.getComputedStyle? getComputedStyle(element) : element.currentStyle;  // currentStyle for IE < 9\n\n  // default textarea styles\n  style.whiteSpace = 'pre-wrap';\n  if (element.nodeName !== 'INPUT')\n    style.wordWrap = 'break-word';  // only for textarea-s\n\n  // position off-screen\n  style.position = 'absolute';  // required to return coordinates properly\n  if (!debug)\n    style.visibility = 'hidden';  // not 'display: none' because we want rendering\n\n  // transfer the element's properties to the div\n  properties.forEach(function (prop) {\n    style[prop] = computed[prop];\n  });\n\n  if (isFirefox) {\n    // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n    if (element.scrollHeight > parseInt(computed.height))\n      style.overflowY = 'scroll';\n  } else {\n    style.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n  }\n\n  div.textContent = element.value.substring(0, position);\n  // the second special handling for input type=\"text\" vs textarea: spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n  if (element.nodeName === 'INPUT')\n    div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n\n  var span = document.createElement('span');\n  // Wrapping must be replicated *exactly*, including when a long word gets\n  // onto the next line, with whitespace at the end of the line before (#7).\n  // The  *only* reliable way to do that is to copy the *entire* rest of the\n  // textarea's content into the <span> created at the caret position.\n  // for inputs, just '.' would be enough, but why bother?\n  span.textContent = element.value.substring(position) || '.';  // || because a completely empty faux span doesn't render at all\n  div.appendChild(span);\n\n  var coordinates = {\n    top: span.offsetTop + parseInt(computed['borderTopWidth']),\n    left: span.offsetLeft + parseInt(computed['borderLeftWidth'])\n  };\n\n  if (debug) {\n    span.style.backgroundColor = '#aaa';\n  } else {\n    document.body.removeChild(div);\n  }\n\n  return coordinates;\n}\n\nif (typeof module != 'undefined' && typeof module.exports != 'undefined') {\n  module.exports = getCaretCoordinates;\n} else if(isBrowser){\n  window.getCaretCoordinates = getCaretCoordinates;\n}\n\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/textarea-caret/index.js\n// module id = 13\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (el, headToCursor, cursorToTail) {\n  var curr = el.value,\n      // strA + strB1 + strC\n  next = headToCursor + (cursorToTail || ''),\n      // strA + strB2 + strC\n  activeElement = document.activeElement;\n\n  //  Calculate length of strA and strC\n  var aLength = 0,\n      cLength = 0;\n  while (curr[aLength] === next[aLength]) {\n    aLength++;\n  }\n  while (curr[curr.length - cLength - 1] === next[next.length - cLength - 1]) {\n    cLength++;\n  }\n  aLength = Math.min(aLength, Math.min(curr.length, next.length) - cLength);\n\n  // Select strB1\n  el.setSelectionRange(aLength, curr.length - cLength);\n\n  // Get strB2\n  var strB2 = next.substring(aLength, next.length - cLength);\n\n  // Replace strB1 with strB2\n  el.focus();\n  if (!document.execCommand('insertText', false, strB2)) {\n    // Document.execCommand returns false if the command is not supported.\n    // Firefox and IE returns false in this case.\n    el.value = next;\n    el.dispatchEvent(createInputEvent());\n  }\n\n  // Move cursor to the end of headToCursor\n  el.setSelectionRange(headToCursor.length, headToCursor.length);\n\n  activeElement && activeElement.focus();\n  return el;\n};\n\nfunction createInputEvent() {\n  if (typeof Event !== \"undefined\") {\n    return new Event(\"input\", { bubbles: true, cancelable: true });\n  } else {\n    var event = document.createEvent(\"Event\");\n    event.initEvent(\"input\", true, true);\n    return event;\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/undate/lib/update.js\n// module id = 14\n// module chunks = 0"],"sourceRoot":""}